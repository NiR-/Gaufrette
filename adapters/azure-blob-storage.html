<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Gaufrette</title>

        <link rel="stylesheet" href="https://knplabs.github.io/Gaufrette/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://knplabs.github.io/Gaufrette/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://knplabs.github.io/Gaufrette/css/highlight.tomorrow-night.css">
        <link rel="stylesheet" href="https://knplabs.github.io/Gaufrette/css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <a class="navbar-brand" href="https://knplabs.github.io/Gaufrette/">
                Gaufrette
                <small class="hidden-xs hidden-sm">
                    Filesystem abstraction layer
                </small>
            </a>

                            <a href="https://github.com/KnpLabs/Gaufrette">
                    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
                </a>
            
        </header>

        <main class="container-fluid">
            <div class="row">

                
                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                                                    <p class="text-muted">
                                Table of Contents
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/">
                                            Introduction
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/installation.html">
                                            Installation
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/basic-usage.html">
                                            Basic Usage
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/caching.html">
                                            Caching
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/streaming.html">
                                            Streaming
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/implementing-new-adapter.html">
                                            Implementing new Adapter
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/extras.html">
                                            Extras
                                        </a>
                                    </li>
                                                            </ul>
                                                    <p class="text-muted">
                                Adapters
                            </p>

                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/amazon-s3.html">
                                            Amazon S3
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/apc.html">
                                            Apc
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/aws-s3.html">
                                            AWS S3
                                        </a>
                                    </li>
                                                                    <li class="active">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/azure-blob-storage.html">
                                            Azure Blob Storage
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/doctrine-dbal.html">
                                            Doctrine DBAL
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/flysystem.html">
                                            Flysystem
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/ftp.html">
                                            Ftp
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/google-cloud-storage.html">
                                            Google Cloud Storage
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/grid-fs.html">
                                            GridFS
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/in-memory.html">
                                            InMemory
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/local.html">
                                            Local
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/open-cloud.html">
                                            OpenCloud
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/phpseclib-sftp.html">
                                            PhpseclibSftp
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/sftp.html">
                                            Sftp
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="https://knplabs.github.io/Gaufrette/adapters/zip.html">
                                            Zip
                                        </a>
                                    </li>
                                                            </ul>
                        
                    </nav>

                
                <section class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                    <h1 id="azureblobstorage">AzureBlobStorage</h1>
<p>First, you will need to install the adapter:</p>
<pre><code class="language-bash">composer require gaufrette/azure-blob-storage-adapter</code></pre>
<p>Azure Blob Storage is the storage service provided by Microsoft Windows Azure cloud environment. To use this adapter
you need to install the <a href="http://www.windowsazure.com/en-us/develop/php/common-tasks/download-php-sdk/">Azure SDK for php</a>
into your project.</p>
<p>To instantiate the <code>AzureBlobStorage</code> adapter you need a <code>BlobProxyFactoryInterface</code> instance (you can use the default
<code>BlobProxyFactory</code> class) and a connection string. The connection string should follow this prototype:</p>
<pre><code>BlobEndpoint=https://XXXXXXXXXX.blob.core.windows.net/;AccountName=XXXXXXXX;AccountKey=XXXXXXXXXXXXXXXXXXXX</code></pre>
<p>You should be able to find your <strong>endpoint</strong>, <strong>account name</strong> and <strong>account key</strong> in your
<a href="https://manage.windowsazure.com">Windows Azure management console</a>.</p>
<p>Thanks to the blob proxy factory, the adapter lazy loads the connection to the endpoint, so it will not create any
connection until it's really needed (eg. when a read or write operation is issued).</p>
<h2 id="multi-container-mode">Multi-container mode</h2>
<p>If you specify a container name, adapter will use only that container for all blobs.</p>
<p>If you omit specifying a container, it will use a so-called multi-container mode in which container name is determined
directly from key. This allows for more flexibility if you're using dedicated storage accounts per asset type
(ie. one for images, one for videos) as you get to group assets logically, use container-level privileges, etc.</p>
<h2 id="example">Example</h2>
<pre><code class="language-php">&lt;?php

$connectionString = '...';
$factory = new Gaufrette\Adapter\AzureBlobStorage\BlobProxyFactory($connectionString);

// single-container mode
$adapter = new Gaufrette\Adapter\AzureBlobStorage($factory, 'my-container');
$filesystem = new Gaufrette\Filesystem($adapter);
// container=my-container, path=my/stuff.txt
$filesystem-&gt;write('my/stuff.txt', 'This is my stuff');

// multi-container mode
$adapter = new Gaufrette\Adapter\AzureBlobStorage($factory);
// make auto-created containers public by default
$containerOptions = new MicrosoftAzure\Storage\Blob\Models\CreateContainerOptions;
$containerOptions-&gt;setPublicAccess(true);
$adapter-&gt;setCreateContainerOptions($containerOptions);
$filesystem = new Gaufrette\Filesystem($adapter);
// container=my (auto-created), path=stuff.txt
$filesystem-&gt;write('my/stuff.txt', 'This is my stuff');
</code></pre>
                </section>

            </div>
        </main>

        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
        <script src="//yandex.st/highlightjs/7.5/highlight.min.js"></script>

        <script>
            $(function() {
                $("section>h1").wrap('<div class="page-header" />');
                // Syntax highlighting
                hljs.initHighlightingOnLoad();
            });
        </script>

    </body>
</html>
